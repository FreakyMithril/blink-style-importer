"use strict";var notifyMessage=function(e){return!1},Storage={saveIn:function(e,t){var s={};s[e]=t,chrome.storage.sync.set(s),notifyMessage("Data successfully saved to the storage!")},readCurrent:function(e,t){chrome.storage.sync.get(e,function(s){t(s[e]||!1)}),notifyMessage("Just readed searched data from storage")},readAll:function(){chrome.storage.sync.get(null,function(e){console.log(e)})},clearCurrent:function(e){chrome.storage.sync.remove(e),notifyMessage("Styles data for current site cleared!")},clearAll:function(){chrome.storage.sync.clear(),notifyMessage("All data in Storage cleared!")}},StyleOnPage={addThem:function(e){notifyMessage("Need check for Exist in HTML before add, and remove if Exist"),StyleOnPage.removeThem();var t=document.createElement("style");return t.type="text/css",t.id="blinkStyles",t.innerHTML=e,document.getElementsByTagName("body")[0].appendChild(t),notifyMessage("Styles on Page Added"),!0},removeThem:function(){var e=document.getElementById("blinkStyles");return null===e?(notifyMessage("Blink style in HTML Not exist"),!1):(notifyMessage("Blink style Exist"),document.getElementsByTagName("body")[0].removeChild(e),notifyMessage("Styles Removed"),!0)},checkForExist:function(){var e=document.getElementById("blinkStyles");return null===e?(notifyMessage("Blink style in HTML Not exist, cant load"),!1):(notifyMessage("Blink style Exist, try to load"),e.innerHTML)}};chrome.runtime.onMessage.addListener(function(e,t,s){notifyMessage("Something happening from the extension");var n=e.url||{},a=e.styles||{};return"removeAllData"===e.greeting&&(StyleOnPage.removeThem()?(Storage.clearAll(),s({success:!0})):s({success:!1})),"removeCurrentData"===e.greeting?StyleOnPage.removeThem()?(Storage.clearCurrent(e.pageUrl),s({success:!0})):s({success:!1}):"loadCurrentData"===e.greeting?Storage.readCurrent(e.pageUrl,function(t){t?(notifyMessage("There is searched key: '"+e.pageUrl+"' in Storage"),s({currentData:t,success:!0})):(notifyMessage("No key in Storage"),s({success:!1}))}):"loadAllData"===e.greeting?(Storage.readAll(),notifyMessage("Data Loaded"),s({success:!0})):"loadDataAndSave"===e.greeting?Storage.readCurrent(e.pageUrl,function(t){t?(notifyMessage("There is searched key: '"+e.pageUrl+"' in Storage, try to save to page"),StyleOnPage.addThem(t),s({success:!0})):(notifyMessage("No key in Storage"),s({success:!1}))}):StyleOnPage.addThem(a)?(Storage.saveIn(n,a),s({currentData:a,success:!0})):s({success:!1}),!0});