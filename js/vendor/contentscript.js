"use strict";var appVersion="0.2.3",notifyMessage=function(e){return!1},logToConsoleData=function(e){console.log("Real Stored ugly data: "),console.log(e)},SendToBg=function(e){switch(e){case"iconEnable":chrome.extension.sendMessage("iconEnable");break;case"iconDisable":chrome.extension.sendMessage("iconDisable")}},OptionsStorage={install:function(){var e={options:{appVersion:appVersion,editorFontSize:14,logTab:!0,autoSave:!0,autoSaveDelay:1e3,logToConsole:!1}};chrome.storage.sync.set(e),notifyMessage("Default options successfully installed in the storage!")},saveOne:function(e,s){chrome.storage.sync.get(null,function(o){var t={};t.options=o.options,notifyMessage(t),t.options[e]=s,notifyMessage(t),chrome.storage.sync.remove("options"),chrome.storage.sync.set(t),notifyMessage("All Fine, Saved one item")}),notifyMessage("Option successfully added to the storage!")},saveAll:function(e){chrome.storage.sync.get(null,function(){var s={};s.options=e,s.options.appVersion=appVersion,notifyMessage(s),chrome.storage.sync.remove("options"),chrome.storage.sync.set(s),notifyMessage("All Fine, saved all new Options")}),notifyMessage("Option successfully updated in the storage!")},clearAll:function(){chrome.storage.sync.remove("options"),notifyMessage("Options cleared!")}},Storage={saveIn:function(e,s){var o={};o[e]=s,chrome.storage.sync.set(o,function(){chrome.runtime.lastError?(console.warn("Whoops.. "+chrome.runtime.lastError.message),notifyMessage("Data NOT been saved in the storage!"),alert("Whoops.. "+chrome.runtime.lastError.message)):notifyMessage("Data successfully saved to the storage!")})},readCurrent:function(e,s){chrome.storage.sync.get(e,function(o){chrome.runtime.lastError?(console.warn("Whoops.. "+chrome.runtime.lastError.message),alert("Whoops.. "+chrome.runtime.lastError.message)):s(o[e]||!1)}),notifyMessage("Just readed searched data from storage")},readAll:function(){chrome.storage.sync.get(null,function(e){chrome.runtime.lastError?(console.warn("Whoops.. "+chrome.runtime.lastError.message),alert("Whoops.. "+chrome.runtime.lastError.message)):logToConsoleData(e)})},clearCurrent:function(e){chrome.storage.sync.remove(e),notifyMessage("Styles data for current site cleared!")},clearAll:function(){chrome.storage.sync.clear(),notifyMessage("All data in Storage cleared!")}},StyleOnPage={addThem:function(e){notifyMessage("Need check for Exist in HTML before add, and remove if Exist"),StyleOnPage.removeThem();var s=document.createElement("style");return s.type="text/css",s.id="blinkStyles",s.innerHTML=JSON.parse(e),document.getElementsByTagName("body")[0].appendChild(s),notifyMessage("Styles on Page Added"),!0},removeThem:function(){var e=document.getElementById("blinkStyles");return null===e?(notifyMessage("Blink style in HTML Not exist"),!1):(notifyMessage("Blink style Exist"),document.getElementsByTagName("body")[0].removeChild(e),notifyMessage("Styles Removed"),!0)},checkForExist:function(){var e=document.getElementById("blinkStyles");return null===e?(notifyMessage("Blink style in HTML Not exist, cant load"),!1):(notifyMessage("Blink style Exist, try to load"),e.innerHTML)}};chrome.runtime.onMessage.addListener(function(e,s,o){notifyMessage("Something happening from the extension");var t=e.url||{},a=e.styles||{};switch(e.greeting){case"removeAllData":Storage.clearAll(),o({success:!0});break;case"removeCurrentData":StyleOnPage.removeThem()?(Storage.clearCurrent(e.pageUrl),o({success:!0}),SendToBg("iconDisable")):o({success:!1});break;case"loadCurrentData":Storage.readCurrent(e.pageUrl,function(s){s?(notifyMessage("There is searched key: '"+e.pageUrl+"' in Storage"),o({currentData:s,success:!0})):(notifyMessage("No key in Storage"),o({success:!1}))});break;case"loadAllData":Storage.readAll(),notifyMessage("Data Loaded"),o({success:!0});break;case"loadDataAndSave":Storage.readCurrent(e.pageUrl,function(s){s?(notifyMessage("There is searched key: '"+e.pageUrl+"' in Storage, try to save to page"),StyleOnPage.addThem(s),o({success:!0})):(notifyMessage("No key in Storage"),o({success:!1}))});break;case"optionsClear":OptionsStorage.clearAll(),o({success:!0});break;case"optionsDefault":OptionsStorage.install(),o({success:!0});break;case"optionsSave":OptionsStorage.saveAll(e.optionsData),o({success:!0});break;default:StyleOnPage.addThem(a)?(Storage.saveIn(t,a),o({currentData:a,success:!0}),SendToBg("iconEnable")):o({success:!1})}return!0});